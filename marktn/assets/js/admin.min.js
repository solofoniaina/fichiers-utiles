

var payer_vanilla = function(id_demande_paiement,ligne)
{
  $.ajax({
    url:base_url+'index.php/admin/payer_vanilla', 
    method:'POST', 
    data:{id_demande_paiement,id_demande_paiement},
    success:function(result){
        $("#btn-payer-"+ligne).html(result);
        $("#btn-payer-"+ligne).css('background-color', '#0079a2'); 
        }
    });
}

var chercher_reference = function()
{
    var code_paiement_m = $("#ref").val();
    if (code_paiement_m != "") {
        if (code_paiement_m.length == 5) {
            $.ajax({
            url:base_url+'admin/chercher_reference', 
            method:'POST', 
            data:{code_paiement_m:code_paiement_m}, 
            success:function(result){
                $("#resultat_validation").html(result);
                }
            });
        }
         else
        {
            alert("Veuillez vérifier la référence de paiement à valider");
        }
    }
    else
    {
        alert("Veuillez saisir la référence de paiement à valider");
    }
    
}

var script_referral = function(id_log_activation, id_membre_log, key)
    {
       $("#btn_"+key).html("Lancement ...");
        $.ajax({
        url:base_url+'referral/script_referral', 
        method:'POST', 
        data:{id_log_activation:id_log_activation, id_membre_log:id_membre_log}, 
        success:function(result){
            $("#tr_"+key).fadeOut();
            }
        });
    }

var script_parrain = function(id_membre, key)
    {
       $("#btn_"+key).html("Lancement ...");
        $.ajax({
        url:base_url+'referral/script_parrain', 
        method:'POST', 
        data:{id_membre:id_membre}, 
        success:function(result){
            $("#tr_"+key).fadeOut();
            }
        });
    }
var mail_confirmation_gros = function()
{
    $("#btn-sendmail").html("Lancement ...");
    var debut = $("#debut").val();
    var limit = $("#limit").val();
    $.ajax({
    url:base_url+'mailing/script_confirmation', 
    method:'POST', 
    data:{debut:debut, limit:limit}, 
    success:function(result){
        $("#btn-sendmail").html("Terminé");
        $("#output").html(result);
        }
    });
}
//DESACTIVER PRODUITS
var supprimer = function(id_package, key)
{
     $("#btn-suppr-admin"+key).html("Suppression ...");
    $.ajax({
    url:base_url+'admin/suppr_package', 
    method:'POST', 
    data:{id_package:id_package}, 
    success:function(result){
        $("#"+key).fadeOut();
        alert(result);
        }
    });
}

var cherche_comandes_periode = function()
{
    var annee = $("#annee_select").val();
    var mois = $("#mois_select").val();
    $("#result_recherche").html(attente);
    $.ajax({
    url:base_url+'admin/cherche_comandes_periode', 
    method:'POST', 
    data:{annee:annee, mois:mois}, 
    success:function(result){
        $("#result_recherche").html(result);
        }
    });
}
// ROLE ####################################################
var ajouter_role = function()
{
    var nom_r = $("#nom_r").val();
    var id_role = $("#id_role").val();
    $.ajax({
    url:base_url+'user/ajouter_role', 
    method:'POST', 
    data:{nom_r:nom_r, id_role:id_role}, 
    success:function(result){
            $("#result_recherche").html(result);
            $("#nom_r").val('');
            $("#id_role").val('');
        }
    });
}

var supprimer_role = function(id_role)
{
    if (confirm('Confirmer la suppression ?')) {
         $.ajax({
        url:base_url+'user/supprimer_role', 
        method:'POST', 
        data:{id_role:id_role}, 
        success:function(result){
            $("#result_recherche").html(result);
            }
        });
    }
}
var modif_role = function(id_role,nom_r)
{
    $("#nom_r").val(nom_r);
    $("#id_role").val(id_role);
}

//USER ####################################################
var ajouter_user = function()
{
    var nom_a = $("#nom_a").val();
    var prenom_a = $("#prenom_a").val();
    var login_a = $("#login_a").val();
    var telephone_a = $("#telephone_a").val();
    var role_a = $("#role_a").val();
    var password_a = $("#password_a").val();
    var id_admin = $("#id_admin").val();
    $.ajax({
    url:base_url+'user/ajouter_user', 
    method:'POST', 
    data:{nom_a:nom_a, prenom_a:prenom_a, login_a:login_a, telephone_a:telephone_a, role_a:role_a, password_a:password_a, id_admin:id_admin}, 
    success:function(result){
            $("#result_recherche").html(result);
            $("#nom_a").val('');
            $("#prenom_a").val('');
            $("#login_a").val('');
            $("#telephone_a").val('');
            $("#role_a").val('');
            $("#password_a").val('');
            $("#id_admin").val('');
        }
    });
}

var modif_user = function(nom_a, prenom_a, login_a, telephone_a, role_a, password_a,id_admin)
{
    $("#nom_a").val(nom_a);
    $("#prenom_a").val(prenom_a);
    $("#login_a").val(login_a);
    $("#telephone_a").val(telephone_a);
    $("#role_a").val(role_a);
    $("#password_a").val(password_a);
    $("#id_admin").val(id_admin);
}
var supprimer_user = function(id_admin)
{
    if (confirm('Confirmer la suppression ?')) {
         $.ajax({
        url:base_url+'user/supprimer_user', 
        method:'POST', 
        data:{id_admin:id_admin}, 
        success:function(result){
            $("#result_recherche").html(result);
            }
        });
    }
}

// CATEGORIES ##########################################

var ajouter_categorie = function()
{
    var nom_c = $("#nom_c").val();
    var id_categorie = $("#id_categorie").val();
    $.ajax({
    url:base_url+'categorie/ajouter_categorie', 
    method:'POST', 
    data:{nom_c:nom_c, id_categorie:id_categorie}, 
    success:function(result){
            $("#result_recherche").html(result);
            $("#nom_c").val('');
            $("#id_categorie").val('');
        }
    });
}

var supprimer_categorie = function(id_categorie)
{
    if (confirm('Confirmer la suppression ?')) {
         $.ajax({
        url:base_url+'categorie/supprimer_categorie', 
        method:'POST', 
        data:{id_categorie:id_categorie}, 
        success:function(result){
            $("#result_recherche").html(result);
            }
        });
    }
}
var modif_categorie = function(id_categorie,nom_c)
{
    $("#nom_c").val(nom_c);
    $("#id_categorie").val(id_categorie);
}

var charger_modif_produit = function(id_package)
{
    $.ajax({
    url:base_url+'admin/ajax_modal_modif', 
    method:'POST', 
    data:{id_package:id_package}, 
    success:function(result){
        $("#place_modal_modif").html(result);
        }
    });
}

//FICHIER
var chercher_fichier = function()
{
    var search = $("#search").val();
    $.ajax({
    url:base_url+'admin/chercher_fichier', 
    method:'POST', 
    data:{search:search}, 
    success:function(result){
        $("#result_recherche").html(result);
        }
    });
    
}